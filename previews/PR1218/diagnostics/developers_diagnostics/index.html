<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>For developers · ClimaLand.jl</title><meta name="title" content="For developers · ClimaLand.jl"/><meta property="og:title" content="For developers · ClimaLand.jl"/><meta property="twitter:title" content="For developers · ClimaLand.jl"/><meta name="description" content="Documentation for ClimaLand.jl."/><meta property="og:description" content="Documentation for ClimaLand.jl."/><meta property="twitter:description" content="Documentation for ClimaLand.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="ClimaLand.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ClimaLand.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../fundamental_concepts/">Fundamental Concepts</a></li><li><a class="tocitem" href="../../getting_started/">Running your first simulation</a></li><li><a class="tocitem" href="../../available_models/">Available Models and Parameterizations</a></li><li><a class="tocitem" href="../../parameters/">Parameters</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-6-1" type="checkbox"/><label class="tocitem" for="menuitem-6-1"><span class="docs-label">Running standalone component simulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Bucket/bucket_tutorial/">Bucket</a></li><li><input class="collapse-toggle" id="menuitem-6-1-2" type="checkbox"/><label class="tocitem" for="menuitem-6-1-2"><span class="docs-label">Soil</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Soil/boundary_conditions/">Boundary conditions</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/richards_equation/">Richards Equation</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/soil_energy_hydrology/">Energy and Hydrology</a></li><li><input class="collapse-toggle" id="menuitem-6-1-2-4" type="checkbox"/><label class="tocitem" for="menuitem-6-1-2-4"><span class="docs-label">Phase Changes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Soil/freezing_front/">Modeling a freezing front in unsaturated soil</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/phase_change_analytic/">The Stefan problem</a></li></ul></li><li><a class="tocitem" href="../../generated/standalone/Soil/layered_soil/">Layered Soil</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/evaporation/">Coarse Sand Evaporation</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/evaporation_gilat_loess/">Gilat Loess Evaporation</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/sublimation/">Bare soil site</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/changing_soil_parameterizations/">Changing soil parameterizations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-1-3" type="checkbox"/><label class="tocitem" for="menuitem-6-1-3"><span class="docs-label">Canopy</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Canopy/default_canopy/">Default canopy</a></li><li><a class="tocitem" href="../../generated/standalone/Canopy/canopy_tutorial/">Default canopy fluxtower simulation </a></li><li><a class="tocitem" href="../../generated/standalone/Canopy/changing_canopy_parameterizations/">Changing canopy parameterizations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-1-4" type="checkbox"/><label class="tocitem" for="menuitem-6-1-4"><span class="docs-label">Snow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Snow/base_tutorial/">Base tutorial</a></li><li><a class="tocitem" href="../../generated/standalone/Snow/data_tutorial/">Data tutorial</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Running Fluxnet simulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/integrated/soil_canopy_fluxnet_tutorial/">Canopy and soil</a></li><li><a class="tocitem" href="../../generated/integrated/snowy_land_fluxnet_tutorial/">Canopy, soil, and snow</a></li><li><a class="tocitem" href="../../generated/integrated/changing_snowy_land_parameterizations/">Changing LandModel parameterizations</a></li><li><a class="tocitem" href="../../generated/integrated/fluxnet_data/">Data processing</a></li><li><a class="tocitem" href="../../generated/integrated/fluxnet_vis/">Visualization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-3" type="checkbox"/><label class="tocitem" for="menuitem-6-3"><span class="docs-label">Running global simulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/global/bucket/">Bucket</a></li><li><a class="tocitem" href="../../generated/global/snowy_land/">Snow, soil, canopy</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-4" type="checkbox"/><label class="tocitem" for="menuitem-6-4"><span class="docs-label">Calibrating a ClimaLand model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/calibration/perfect_model_site_level_calibration/">Single site perfect model</a></li><li><a class="tocitem" href="../../generated/calibration/obs_site_level_calibration/">Single site observations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-5" type="checkbox"/><label class="tocitem" for="menuitem-6-5"><span class="docs-label">Running coupled simulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Bucket/coupled_bucket/">Coupled bucket model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-6" type="checkbox"/><label class="tocitem" for="menuitem-6-6"><span class="docs-label">For model developers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Usage/model_tutorial/">Intro to standalone models</a></li><li><input class="collapse-toggle" id="menuitem-6-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-6-2"><span class="docs-label">Intro to multi-component models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Usage/LSM_single_column_tutorial/">Single column tutorial</a></li><li><a class="tocitem" href="../../generated/integrated/handling_soil_fluxes/">Adjusting boundary conditions for the soil</a></li><li><a class="tocitem" href="../../generated/integrated/handling_snow_fluxes/">Adjusting boundary conditions for the snow</a></li></ul></li><li><a class="tocitem" href="../../generated/standalone/Usage/domain_tutorial/">Intro to ClimaLand Domains</a></li><li><a class="tocitem" href="../../generated/shared_utilities/driver_tutorial/">Intro to forced site-level runs</a></li><li><a class="tocitem" href="../../generated/shared_utilities/timestepping/">Intro to implicit/explicit timestepping</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox" checked/><label class="tocitem" for="menuitem-7"><span class="docs-label">Writing and accessing outputs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../users_diagnostics/">For users</a></li><li class="is-active"><a class="tocitem" href>For developers</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Default-diagnostics"><span>Default diagnostics</span></a></li><li><a class="tocitem" href="#&quot;Long&quot;-diagnostics-(output_vars-:long)"><span>&quot;Long&quot; diagnostics (<code>output_vars = :long</code>)</span></a></li><li><a class="tocitem" href="#&quot;Short&quot;-diagnostics-(output_vars-:short)"><span>&quot;Short&quot; diagnostics (<code>output_vars = :short</code>)</span></a></li><li class="toplevel"><a class="tocitem" href="#Standard-diagnostic-frequencies"><span>Standard diagnostic frequencies</span></a></li><li class="toplevel"><a class="tocitem" href="#Compute-methods"><span>Compute methods</span></a></li><li class="toplevel"><a class="tocitem" href="#Define-diagnostics"><span>Define diagnostics</span></a></li></ul></li><li><a class="tocitem" href="../available_diagnostics/">Available diagnostics</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">Model Equations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-8-1" type="checkbox"/><label class="tocitem" for="menuitem-8-1"><span class="docs-label">Vegetation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-8-1-1" type="checkbox"/><label class="tocitem" for="menuitem-8-1-1"><span class="docs-label">Radiative transfer</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/radiative_transfer/beer_model/">Beer model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/radiative_transfer/twostream_model/">Two-Stream model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-2" type="checkbox"/><label class="tocitem" for="menuitem-8-1-2"><span class="docs-label">Photosynthesis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/photosynthesis/farquhar_model/">Farquhar model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/photosynthesis/pmodel/">P-model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-3" type="checkbox"/><label class="tocitem" for="menuitem-8-1-3"><span class="docs-label">Stomatal conductance</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/stomatal_conductance/medlyn_model/">Medlyn model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/photosynthesis/pmodel/">P-model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-4" type="checkbox"/><label class="tocitem" for="menuitem-8-1-4"><span class="docs-label">Plant hydraulics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/plant_hydraulics/prognostic/">Prognostic model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-5" type="checkbox"/><label class="tocitem" for="menuitem-8-1-5"><span class="docs-label">Solar Induced Fluorescence</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/solar_induced_fluorescence/lee_model/">Lee model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-6" type="checkbox"/><label class="tocitem" for="menuitem-8-1-6"><span class="docs-label">Canopy structure</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/canopy_structure/prescribed_structure/">Prescribed structure</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-7" type="checkbox"/><label class="tocitem" for="menuitem-8-1-7"><span class="docs-label">Canopy energy</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/canopy_energy/canopy_energy/">Physics</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-8" type="checkbox"/><label class="tocitem" for="menuitem-8-1-8"><span class="docs-label">Soil moisture stress</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/soil_moisture_stress/piecewise_model/">Piecewise model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/soil_moisture_stress/tuzet_model/">Tuzet model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/soil_moisture_stress/no_moisture_stress/">No moisture stress</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-9" type="checkbox"/><label class="tocitem" for="menuitem-8-1-9"><span class="docs-label">Autotrophic respiration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/autotrophic_respiration/jules_model/">JULES model</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-2" type="checkbox"/><label class="tocitem" for="menuitem-8-2"><span class="docs-label">Soil</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-8-2-1" type="checkbox"/><label class="tocitem" for="menuitem-8-2-1"><span class="docs-label">Physics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/soil/physics/richards_model/">Richards model</a></li><li><a class="tocitem" href="../../standalone/pages/soil/physics/energy_model/">Energy+Hydrology model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-2-2" type="checkbox"/><label class="tocitem" for="menuitem-8-2-2"><span class="docs-label">Biogeochemistry</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/soil/biogeochemistry/DAMM_model/">DAMM model</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-3" type="checkbox"/><label class="tocitem" for="menuitem-8-3"><span class="docs-label">Snow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/snow/snow_model/">Snow model</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Calibration and benchmark</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../calibration/">Calibrating model parameters</a></li><li><a class="tocitem" href="../../leaderboard/leaderboard/">Model Benchmark</a></li></ul></li><li><a class="tocitem" href="../../architectures/">Running on GPU or with MPI</a></li><li><input class="collapse-toggle" id="menuitem-11" type="checkbox"/><label class="tocitem" for="menuitem-11"><span class="docs-label">Additional resources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../repo_structure/">Repository structure</a></li><li><a class="tocitem" href="../../restarts/">Restarting a simulation</a></li><li><input class="collapse-toggle" id="menuitem-11-3" type="checkbox"/><label class="tocitem" for="menuitem-11-3"><span class="docs-label">Software utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../itime/">ITime type</a></li><li><a class="tocitem" href="../../shared_utilities/">Shared utilities</a></li></ul></li><li><a class="tocitem" href="../../physical_units/">Physical units</a></li></ul></li><li><a class="tocitem" href="../../julia/">Julia background</a></li><li><input class="collapse-toggle" id="menuitem-13" type="checkbox"/><label class="tocitem" for="menuitem-13"><span class="docs-label">APIs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-13-1" type="checkbox"/><label class="tocitem" for="menuitem-13-1"><span class="docs-label">Soil</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../APIs/soil/Soil/">Soil Energy and Hydrology</a></li><li><a class="tocitem" href="../../APIs/soil/SoilSourcesandBCs/">Soil Sources and Boundary Conditions</a></li><li><a class="tocitem" href="../../APIs/soil/SoilBiogeochemistry/">Soil Biogeochemistry</a></li><li><a class="tocitem" href="../../APIs/soil/SoilAlbedo/">Soil Albedo</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-13-2" type="checkbox"/><label class="tocitem" for="menuitem-13-2"><span class="docs-label">Canopy</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../APIs/canopy/Canopy/">Canopy Models</a></li><li><a class="tocitem" href="../../APIs/canopy/PlantHydraulics/">Plant Hydraulics</a></li><li><a class="tocitem" href="../../APIs/canopy/Biomass/">Leaf, stem, root dynamics</a></li><li><a class="tocitem" href="../../APIs/canopy/Photosynthesis/">Photosynthesis</a></li><li><a class="tocitem" href="../../APIs/canopy/RadiativeTransfer/">Radiative Transfer</a></li><li><a class="tocitem" href="../../APIs/canopy/CanopyEnergy/">Energy</a></li><li><a class="tocitem" href="../../APIs/canopy/StomatalConductance/">Stomatal Conductance</a></li><li><a class="tocitem" href="../../APIs/canopy/AutotrophicRespiration/">Autotrophic Respiration</a></li></ul></li><li><a class="tocitem" href="../../APIs/SurfaceWater/">Surface Water Models</a></li><li><a class="tocitem" href="../../APIs/Bucket/">Bucket Model</a></li><li><a class="tocitem" href="../../APIs/Snow/">Snow Model</a></li><li><a class="tocitem" href="../../APIs/ClimaLand/">Integrated Models</a></li><li><input class="collapse-toggle" id="menuitem-13-7" type="checkbox"/><label class="tocitem" for="menuitem-13-7"><span class="docs-label">Shared Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../APIs/AbstractModels/">Abstract Models and Functions</a></li><li><a class="tocitem" href="../../APIs/AuxiliaryVariablesCache/">Auxiliary Variables Cache</a></li><li><a class="tocitem" href="../../APIs/Callbacks/">Callbacks</a></li><li><a class="tocitem" href="../../APIs/Domains/">Domains</a></li><li><a class="tocitem" href="../../APIs/Drivers/">Drivers</a></li><li><a class="tocitem" href="../../APIs/Simulations/">Simulations</a></li><li><a class="tocitem" href="../../APIs/SolverFunctions/">Solver Functions</a></li></ul></li></ul></li><li><a class="tocitem" href="../../contributing/">Contributor guide</a></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Writing and accessing outputs</a></li><li class="is-active"><a href>For developers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>For developers</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaLand.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaLand.jl/blob/main/docs/src/diagnostics/developers_diagnostics.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ClimaLand-Diagnostics:-why-and-how"><a class="docs-heading-anchor" href="#ClimaLand-Diagnostics:-why-and-how">ClimaLand Diagnostics: why and how</a><a id="ClimaLand-Diagnostics:-why-and-how-1"></a><a class="docs-heading-anchor-permalink" href="#ClimaLand-Diagnostics:-why-and-how" title="Permalink"></a></h1><p>ClimaLand simulations generates variables in the integrator state (Y) and cache (p) at each time step. A user will need to use these variables in some form, i.e., access them from a file that contains variables at a given temporal and spatial resolution. The user will also want to retrieve metadata about those variables, such as name and units. This is where ClimaLand diagnostics comes in, it writes simulations variables (in a file, such as NetCDF or HDF5, or in Julia Dict), at a specified spatio-temporal reduction (e.g., hourly averages, monthly max, instantaneous, integrated through soil depth...), along with metadata (e.g., soil temperature short name is t_soil, expressed in &quot;K&quot; units). We want to provide users with default options, but also the possibility to define their own variables and reductions.</p><p>Internally, this is done by using the <a href="https://github.com/CliMA/ClimaDiagnostics.jl"><code>ClimaDiagnostics.jl</code></a> package, that provides the functionality to produce a <a href="https://github.com/CliMA/ClimaLand.jl/tree/main/src/Diagnostics/Diagnostics.jl"><code>ClimaLand.Diagnostics</code></a> module in the src/Diagnostics.jl folder. In this folder,</p><ul><li><code>Diagnostics.jl</code> defines the module,</li><li><code>diagnostic.jl</code> defines <code>ALL_DIAGNOSTICS</code>, a Dict containing all diagnostics variables defined in <code>define_diagnostics.jl</code>, it also defines the function</li></ul><p><code>add_diagnostic_variable!</code> which defines a method to add diagnostic variables to ALL_DIAGNOSTICS, finally it contains a function <code>get_diagnostic_variable</code> which returns a  <code>DiagnosticVariable</code> from its <code>short_name</code>, if it exists.</p><ul><li><code>define_diagnostics.jl</code>, mentioned above, contains a function <code>define_diagnostics!(land_model)</code> which contains all default diagnostic variables by calling.</li></ul><p><code>add_diagnostic_variable!</code>, and dispatch off the type of land_model to define how to compute a diagnostic (for example, surface temperature is computed in <code>p.bucket.T_sfc</code> in the bucket model).</p><ul><li><code>land_compute_methods.jl</code> defines how to compute diagnostics for various ClimaLand models.</li></ul><p>The following section give more details on these functions, along with examples.</p><h1 id="Default-diagnostics"><a class="docs-heading-anchor" href="#Default-diagnostics">Default diagnostics</a><a id="Default-diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Default-diagnostics" title="Permalink"></a></h1><p>For each model, we define a function <code>default_diagnostics</code> which retrieves the set of diagnostic variables to compute for this model, and over which time period to average the values.</p><h2 id="&quot;Long&quot;-diagnostics-(output_vars-:long)"><a class="docs-heading-anchor" href="#&quot;Long&quot;-diagnostics-(output_vars-:long)">&quot;Long&quot; diagnostics (<code>output_vars = :long</code>)</a><a id="&quot;Long&quot;-diagnostics-(output_vars-:long)-1"></a><a class="docs-heading-anchor-permalink" href="#&quot;Long&quot;-diagnostics-(output_vars-:long)" title="Permalink"></a></h2><p>Each model has a method of the function <code>get_possible_diagnostics</code> which contains a list of all available diagnostics for the model. This is exactly the set of diagnostics output when <code>output_vars = :long</code>. For standalone models, the list is mostly hardcoded, though it may also depend on which parameterizations are available in the model. For integrated models, the list contains all possible diagnostics for each component model, as well as any additional diagnostics specific to the integrated model.</p><h2 id="&quot;Short&quot;-diagnostics-(output_vars-:short)"><a class="docs-heading-anchor" href="#&quot;Short&quot;-diagnostics-(output_vars-:short)">&quot;Short&quot; diagnostics (<code>output_vars = :short</code>)</a><a id="&quot;Short&quot;-diagnostics-(output_vars-:short)-1"></a><a class="docs-heading-anchor-permalink" href="#&quot;Short&quot;-diagnostics-(output_vars-:short)" title="Permalink"></a></h2><p>Similarly, each model has a method of <code>get_short_diagnostics</code>, which is a selected subset of the overall available diagnostics for the model that gets used when <code>output_vars = :short</code>. As is the case with <code>get_possible_diagnostics</code>, the set of variables for integrated models is based on its component models, and any additional integrated model-specific variables.</p><h1 id="Standard-diagnostic-frequencies"><a class="docs-heading-anchor" href="#Standard-diagnostic-frequencies">Standard diagnostic frequencies</a><a id="Standard-diagnostic-frequencies-1"></a><a class="docs-heading-anchor-permalink" href="#Standard-diagnostic-frequencies" title="Permalink"></a></h1><p>We have defined functions which compute statistical metrics of the instantaneous diagnostic variables at different standard frequencies. For example,</p><pre><code class="language-Julia hljs">hourly_averages(FT, short_names...; output_writer) = common_diagnostics(
    :hourly,
    :average,
    output_writer,
    nothing, # start_date
    short_names...;
)</code></pre><p>will return a list of <code>ScheduledDiagnostics</code> that compute the hourly average for the given variables listed in <code>short_names</code>. We also, so far, provide functions for mins, maxs and averages aggregated monthly, over ten days, daily, hourly, and half-hourly. As a developer, you may want to add more standard diagnostics here.</p><h1 id="Compute-methods"><a class="docs-heading-anchor" href="#Compute-methods">Compute methods</a><a id="Compute-methods-1"></a><a class="docs-heading-anchor-permalink" href="#Compute-methods" title="Permalink"></a></h1><p>Each model defines all its compute methods in a file (bucket_compute_methods.jl for the bucket model, for example). The structure of a diagnostic variable compute method is, for example:</p><pre><code class="language-Julia hljs">@with_error function compute_albedo!(out, Y, p, t, land_model::BucketModel)
    if isnothing(out)
        return copy(p.bucket.α_sfc)
    else
        out .= p.bucket.α_sfc
    end
end</code></pre><p>It defines how to access your diagnostic (here, p.bucket.α_sfc) with the land_model <code>BucketModel</code>. Note that you can also use the @diagnostic_compute macro to do the same thing:</p><pre><code class="language-Julia hljs">@diagnostic_compute &quot;albedo&quot; BucketModel p.bucket.α\_sfc</code></pre><p>The <code>@with_error</code> macro define helper functions returning error messages if a user tries to compute a diagnostic variable that doesn&#39;t exist in their model type.</p><h1 id="Define-diagnostics"><a class="docs-heading-anchor" href="#Define-diagnostics">Define diagnostics</a><a id="Define-diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Define-diagnostics" title="Permalink"></a></h1><p>Once the compute functions have been defined, they are added to <code>define_diagnostics!(land_model)</code>, which adds diagnostics variables to ALL_DIAGNOSTICS dict, defined in diagnostic.jl. In these functions, you also define a <code>short_name</code>, <code>long_name</code>, <code>standard_name</code>, <code>units</code> and <code>comment</code>. For example:</p><pre><code class="language-Julia hljs">add_diagnostic_variable!(
        short_name = &quot;alpha&quot;,
        long_name = &quot;Albedo&quot;,
        standard_name = &quot;albedo&quot;,
        units = &quot;&quot;,
        compute! = (out, Y, p, t) -&gt; compute_albedo!(out, Y, p, t, land_model),
    )</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../users_diagnostics/">« For users</a><a class="docs-footer-nextpage" href="../available_diagnostics/">Available diagnostics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 29 October 2025 18:19">Wednesday 29 October 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
