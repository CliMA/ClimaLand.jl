<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Auxiliary Variables Cache · ClimaLand.jl</title><meta name="title" content="Auxiliary Variables Cache · ClimaLand.jl"/><meta property="og:title" content="Auxiliary Variables Cache · ClimaLand.jl"/><meta property="twitter:title" content="Auxiliary Variables Cache · ClimaLand.jl"/><meta name="description" content="Documentation for ClimaLand.jl."/><meta property="og:description" content="Documentation for ClimaLand.jl."/><meta property="twitter:description" content="Documentation for ClimaLand.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="ClimaLand.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ClimaLand.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../fundamental_concepts/">Fundamental Concepts</a></li><li><a class="tocitem" href="../../getting_started/">Running your first simulation</a></li><li><a class="tocitem" href="../../available_models/">Available Models and Parameterizations</a></li><li><a class="tocitem" href="../../parameters/">Parameters</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-6-1" type="checkbox"/><label class="tocitem" for="menuitem-6-1"><span class="docs-label">Running standalone component simulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Bucket/bucket_tutorial/">Bucket</a></li><li><input class="collapse-toggle" id="menuitem-6-1-2" type="checkbox"/><label class="tocitem" for="menuitem-6-1-2"><span class="docs-label">Soil</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Soil/boundary_conditions/">Boundary conditions</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/richards_equation/">Richards Equation</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/soil_energy_hydrology/">Energy and Hydrology</a></li><li><input class="collapse-toggle" id="menuitem-6-1-2-4" type="checkbox"/><label class="tocitem" for="menuitem-6-1-2-4"><span class="docs-label">Phase Changes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Soil/freezing_front/">Modeling a freezing front in unsaturated soil</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/phase_change_analytic/">The Stefan problem</a></li></ul></li><li><a class="tocitem" href="../../generated/standalone/Soil/layered_soil/">Layered Soil</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/evaporation/">Coarse Sand Evaporation</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/evaporation_gilat_loess/">Gilat Loess Evaporation</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/sublimation/">Bare soil site</a></li><li><a class="tocitem" href="../../generated/standalone/Soil/changing_soil_parameterizations/">Changing soil parameterizations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-1-3" type="checkbox"/><label class="tocitem" for="menuitem-6-1-3"><span class="docs-label">Canopy</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Canopy/default_canopy/">Default canopy</a></li><li><a class="tocitem" href="../../generated/standalone/Canopy/canopy_tutorial/">Default canopy fluxtower simulation </a></li><li><a class="tocitem" href="../../generated/standalone/Canopy/changing_canopy_parameterizations/">Changing canopy parameterizations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-1-4" type="checkbox"/><label class="tocitem" for="menuitem-6-1-4"><span class="docs-label">Snow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Snow/base_tutorial/">Base tutorial</a></li><li><a class="tocitem" href="../../generated/standalone/Snow/data_tutorial/">Data tutorial</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Running Fluxnet simulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/integrated/soil_canopy_fluxnet_tutorial/">Canopy and soil</a></li><li><a class="tocitem" href="../../generated/integrated/snowy_land_fluxnet_tutorial/">Canopy, soil, and snow</a></li><li><a class="tocitem" href="../../generated/integrated/changing_snowy_land_parameterizations/">Changing LandModel parameterizations</a></li><li><a class="tocitem" href="../../generated/integrated/fluxnet_data/">Data processing</a></li><li><a class="tocitem" href="../../generated/integrated/fluxnet_vis/">Visualization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-3" type="checkbox"/><label class="tocitem" for="menuitem-6-3"><span class="docs-label">Running global simulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/global/bucket/">Bucket</a></li><li><a class="tocitem" href="../../generated/global/snowy_land/">Snow, soil, canopy</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-4" type="checkbox"/><label class="tocitem" for="menuitem-6-4"><span class="docs-label">Calibrating a ClimaLand model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/calibration/perfect_model_site_level_calibration/">Single site perfect model</a></li><li><a class="tocitem" href="../../generated/calibration/obs_site_level_calibration/">Single site observations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-5" type="checkbox"/><label class="tocitem" for="menuitem-6-5"><span class="docs-label">Running coupled simulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Bucket/coupled_bucket/">Coupled bucket model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-6" type="checkbox"/><label class="tocitem" for="menuitem-6-6"><span class="docs-label">For model developers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Usage/model_tutorial/">Intro to standalone models</a></li><li><input class="collapse-toggle" id="menuitem-6-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-6-2"><span class="docs-label">Intro to multi-component models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/standalone/Usage/LSM_single_column_tutorial/">Single column tutorial</a></li><li><a class="tocitem" href="../../generated/integrated/handling_soil_fluxes/">Adjusting boundary conditions for the soil</a></li><li><a class="tocitem" href="../../generated/integrated/handling_snow_fluxes/">Adjusting boundary conditions for the snow</a></li></ul></li><li><a class="tocitem" href="../../generated/standalone/Usage/domain_tutorial/">Intro to ClimaLand Domains</a></li><li><a class="tocitem" href="../../generated/shared_utilities/driver_tutorial/">Intro to forced site-level runs</a></li><li><a class="tocitem" href="../../generated/shared_utilities/timestepping/">Intro to implicit/explicit timestepping</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Writing and accessing outputs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../diagnostics/users_diagnostics/">For users</a></li><li><a class="tocitem" href="../../diagnostics/developers_diagnostics/">For developers</a></li><li><a class="tocitem" href="../../diagnostics/available_diagnostics/">Available diagnostics</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">Model Equations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-8-1" type="checkbox"/><label class="tocitem" for="menuitem-8-1"><span class="docs-label">Vegetation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-8-1-1" type="checkbox"/><label class="tocitem" for="menuitem-8-1-1"><span class="docs-label">Radiative transfer</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/radiative_transfer/beer_model/">Beer model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/radiative_transfer/twostream_model/">Two-Stream model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-2" type="checkbox"/><label class="tocitem" for="menuitem-8-1-2"><span class="docs-label">Photosynthesis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/photosynthesis/farquhar_model/">Farquhar model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/photosynthesis/pmodel/">P-model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-3" type="checkbox"/><label class="tocitem" for="menuitem-8-1-3"><span class="docs-label">Stomatal conductance</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/stomatal_conductance/medlyn_model/">Medlyn model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/photosynthesis/pmodel/">P-model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-4" type="checkbox"/><label class="tocitem" for="menuitem-8-1-4"><span class="docs-label">Plant hydraulics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/plant_hydraulics/prognostic/">Prognostic model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-5" type="checkbox"/><label class="tocitem" for="menuitem-8-1-5"><span class="docs-label">Solar Induced Fluorescence</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/solar_induced_fluorescence/lee_model/">Lee model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-6" type="checkbox"/><label class="tocitem" for="menuitem-8-1-6"><span class="docs-label">Canopy structure</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/canopy_structure/prescribed_structure/">Prescribed structure</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-7" type="checkbox"/><label class="tocitem" for="menuitem-8-1-7"><span class="docs-label">Canopy energy</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/canopy_energy/canopy_energy/">Physics</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-8" type="checkbox"/><label class="tocitem" for="menuitem-8-1-8"><span class="docs-label">Soil moisture stress</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/soil_moisture_stress/piecewise_model/">Piecewise model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/soil_moisture_stress/tuzet_model/">Tuzet model</a></li><li><a class="tocitem" href="../../standalone/pages/vegetation/soil_moisture_stress/no_moisture_stress/">No moisture stress</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-1-9" type="checkbox"/><label class="tocitem" for="menuitem-8-1-9"><span class="docs-label">Autotrophic respiration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/vegetation/autotrophic_respiration/jules_model/">JULES model</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-2" type="checkbox"/><label class="tocitem" for="menuitem-8-2"><span class="docs-label">Soil</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-8-2-1" type="checkbox"/><label class="tocitem" for="menuitem-8-2-1"><span class="docs-label">Physics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/soil/physics/richards_model/">Richards model</a></li><li><a class="tocitem" href="../../standalone/pages/soil/physics/energy_model/">Energy+Hydrology model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-2-2" type="checkbox"/><label class="tocitem" for="menuitem-8-2-2"><span class="docs-label">Biogeochemistry</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/soil/biogeochemistry/DAMM_model/">DAMM model</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-3" type="checkbox"/><label class="tocitem" for="menuitem-8-3"><span class="docs-label">Snow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../standalone/pages/snow/snow_model/">Snow model</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Calibration and benchmark</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../calibration/">Calibrating model parameters</a></li><li><a class="tocitem" href="../../leaderboard/leaderboard/">Model Benchmark</a></li></ul></li><li><a class="tocitem" href="../../architectures/">Running on GPU or with MPI</a></li><li><input class="collapse-toggle" id="menuitem-11" type="checkbox"/><label class="tocitem" for="menuitem-11"><span class="docs-label">Additional resources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../repo_structure/">Repository structure</a></li><li><a class="tocitem" href="../../restarts/">Restarting a simulation</a></li><li><input class="collapse-toggle" id="menuitem-11-3" type="checkbox"/><label class="tocitem" for="menuitem-11-3"><span class="docs-label">Software utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../itime/">ITime type</a></li><li><a class="tocitem" href="../../shared_utilities/">Shared utilities</a></li></ul></li><li><a class="tocitem" href="../../physical_units/">Physical units</a></li></ul></li><li><a class="tocitem" href="../../julia/">Julia background</a></li><li><input class="collapse-toggle" id="menuitem-13" type="checkbox" checked/><label class="tocitem" for="menuitem-13"><span class="docs-label">APIs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-13-1" type="checkbox"/><label class="tocitem" for="menuitem-13-1"><span class="docs-label">Soil</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../soil/Soil/">Soil Energy and Hydrology</a></li><li><a class="tocitem" href="../soil/SoilSourcesandBCs/">Soil Sources and Boundary Conditions</a></li><li><a class="tocitem" href="../soil/SoilBiogeochemistry/">Soil Biogeochemistry</a></li><li><a class="tocitem" href="../soil/SoilAlbedo/">Soil Albedo</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-13-2" type="checkbox"/><label class="tocitem" for="menuitem-13-2"><span class="docs-label">Canopy</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../canopy/Canopy/">Canopy Models</a></li><li><a class="tocitem" href="../canopy/PlantHydraulics/">Plant Hydraulics</a></li><li><a class="tocitem" href="../canopy/Biomass/">Leaf, stem, root dynamics</a></li><li><a class="tocitem" href="../canopy/Photosynthesis/">Photosynthesis</a></li><li><a class="tocitem" href="../canopy/RadiativeTransfer/">Radiative Transfer</a></li><li><a class="tocitem" href="../canopy/CanopyEnergy/">Energy</a></li><li><a class="tocitem" href="../canopy/StomatalConductance/">Stomatal Conductance</a></li><li><a class="tocitem" href="../canopy/AutotrophicRespiration/">Autotrophic Respiration</a></li></ul></li><li><a class="tocitem" href="../SurfaceWater/">Surface Water Models</a></li><li><a class="tocitem" href="../Bucket/">Bucket Model</a></li><li><a class="tocitem" href="../Snow/">Snow Model</a></li><li><a class="tocitem" href="../ClimaLand/">Integrated Models</a></li><li><input class="collapse-toggle" id="menuitem-13-7" type="checkbox" checked/><label class="tocitem" for="menuitem-13-7"><span class="docs-label">Shared Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../AbstractModels/">Abstract Models and Functions</a></li><li class="is-active"><a class="tocitem" href>Auxiliary Variables Cache</a></li><li><a class="tocitem" href="../Callbacks/">Callbacks</a></li><li><a class="tocitem" href="../Domains/">Domains</a></li><li><a class="tocitem" href="../Drivers/">Drivers</a></li><li><a class="tocitem" href="../Simulations/">Simulations</a></li><li><a class="tocitem" href="../SolverFunctions/">Solver Functions</a></li></ul></li></ul></li><li><a class="tocitem" href="../../contributing/">Contributor guide</a></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">APIs</a></li><li><a class="is-disabled">Shared Utilities</a></li><li class="is-active"><a href>Auxiliary Variables Cache</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Auxiliary Variables Cache</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaLand.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaLand.jl/blob/main/docs/src/APIs/AuxiliaryVariablesCache.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ClimaLand-Auxiliary-Variables-Cache-Constructors-and-Update-Methods"><a class="docs-heading-anchor" href="#ClimaLand-Auxiliary-Variables-Cache-Constructors-and-Update-Methods">ClimaLand Auxiliary Variables Cache Constructors and Update Methods</a><a id="ClimaLand-Auxiliary-Variables-Cache-Constructors-and-Update-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#ClimaLand-Auxiliary-Variables-Cache-Constructors-and-Update-Methods" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.initialize_auxiliary" href="#ClimaLand.initialize_auxiliary"><code>ClimaLand.initialize_auxiliary</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_auxiliary(model::AbstractModel, state::NamedTuple)</code></pre><p>Returns a NamedTuple of auxiliary variables for <code>model</code> with the required structure, with values equal to <code>similar(state)</code>. This assumes that all  auxiliary variables are defined over the entire domain, and that all auxiliary variables have the same dimension and type. The auxiliary variables NamedTuple can also hold preallocated objects which are not Fields.</p><p>If a model has no auxiliary variables, the returned NamedTuple contains only an empty array.</p><p>The input <code>state</code> is an array-like object, usually a ClimaCore Field or a Vector{FT}.</p><p>Adjustments to this - for example because different auxiliary variables have different dimensions - require defining a new method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/models.jl#L346-L363">source</a></section><section><div><pre><code class="language-julia hljs">initialize_auxiliary(
    component::AbstractCanopyComponent,
    state,
)</code></pre><p>Creates and returns a ClimaCore.Fields.FieldVector with the auxiliary variables of the canopy component  <code>component</code>, stored using the name of the component.</p><p>The input <code>state</code> is usually a ClimaCore Field object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/component_models.jl#L91-L102">source</a></section><section><div><pre><code class="language-julia hljs">initialize_auxiliary(
    model::CanopyModel{FT},
    coords,
) where {FT}</code></pre><p>Creates the auxiliary state vector of the <code>CanopyModel</code> and returns  it as a ClimaCore.Fields.FieldVector.</p><p>The input <code>coords</code> is usually a ClimaCore Field object.</p><p>This function loops over the components of the <code>CanopyModel</code> and appends each component models auxiliary state vector into a single state vector, structured by component name.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/Canopy.jl#L980-L994">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.make_set_initial_cache" href="#ClimaLand.make_set_initial_cache"><code>ClimaLand.make_set_initial_cache</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">make_set_initial_cache(model::AbstractModel)</code></pre><p>Returns the <code>set_initial_cache!</code> function, which updates the auxiliary state <code>p</code> in place with the initial values corresponding to Y(t=t0) = Y0.</p><p>In principle, this function is not needed, because in the very first evaluation of either <code>explicit_tendency</code> or <code>implicit_tendency</code>, at t=t0, the auxiliary state is updated using the initial conditions for Y=Y0. However, without setting the initial <code>p</code> state prior to running the simulation, the value of <code>p</code> in the saved output at t=t0 will be unset.</p><p>Furthermore, specific methods of this function may be useful for models which store time indepedent spatially varying parameter fields in the auxiliary state. In this case, <code>update_aux!</code> does not need to do anything, but they do need to be set with the initial (constant) values before the simulation can be carried out.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/models.jl#L287-L304">source</a></section><section><div><pre><code class="language-julia hljs">make_set_initial_cache(model::Union{LandModel, SoilCanopyModel})</code></pre><p>Creates the function with arguments (p,Y0,t0) that updates the cache <code>p</code> with initial values corresponding to Y0 and t0.</p><p>We require a different method from the default for a model with a canopy, so this method is for any model with type ∈ Union{LandModel, SoilCanopyModel}. This is a close copy of the method for the CanopyModel, except unpacking <code>model.canopy</code> rather than using <code>model</code> directly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/integrated/land.jl#L696-L707">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.make_set_initial_cache(model::CanopyModel)</code></pre><p>Set the initial cache <code>p</code> for the canopy model. Note that if the photosynthesis model is the P-model, then <code>set_initial_cache!</code> will also run <code>set_historical_cache!</code> which sets the (t-1) values for Vcmax25<em>opt, Jmax25</em>opt, and ξ_opt.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/Canopy.jl#L1215-L1221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.make_update_aux" href="#ClimaLand.make_update_aux"><code>ClimaLand.make_update_aux</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">make_update_aux(model::RichardsModel)</code></pre><p>An extension of the function <code>make_update_aux</code>, for the Richardson- Richards equation.</p><p>This function creates and returns a function which updates the auxiliary variables <code>p.soil.variable</code> in place.</p><p>This has been written so as to work with Differential Equations.jl.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/rre.jl#L357-L367">source</a></section><section><div><pre><code class="language-julia hljs">make_update_aux(model::EnergyHydrology)</code></pre><p>An extension of the function <code>make_update_aux</code>, for the integrated soil hydrology and energy model.</p><p>This function creates and returns a function which updates the auxiliary variables <code>p.soil.variable</code> in place.</p><p>This has been written so as to work with Differential Equations.jl.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/energy_hydrology.jl#L672-L682">source</a></section><section><div><pre><code class="language-julia hljs">make_update_aux(model::BucketModel{FT}) where {FT}</code></pre><p>Creates the update_aux! function for the BucketModel.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Bucket/Bucket.jl#L480-L484">source</a></section><section><div><pre><code class="language-julia hljs">make_update_aux(model::AbstractModel)</code></pre><p>Return an <code>update_aux!</code> function that updates auxiliary parameters <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/models.jl#L143-L147">source</a></section><section><div><pre><code class="language-julia hljs"> ClimaLand.make_update_aux(canopy::CanopyModel)</code></pre><p>Creates the <code>update_aux!</code> function for the <code>CanopyModel</code></p><p>Please note that the plant hydraulics model has auxiliary variables that are updated in its prognostic <code>compute_exp_tendency!</code> function. While confusing, this is better for performance as it saves looping over the state vector multiple times.</p><p>The other sub-components rely heavily on each other, so the version of the <code>CanopyModel</code> with these subcomponents has a single update_aux! function, given here.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/Canopy.jl#L1041-L1054">source</a></section><section><div><pre><code class="language-julia hljs">make_update_aux(model::SoilCO2Model)</code></pre><p>An extension of the function <code>make_update_aux</code>, for the soilco2 equation. This function creates and returns a function which updates the auxiliary variables <code>p.soil.variable</code> in place. This has been written so as to work with Differential Equations.jl.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/Biogeochemistry/Biogeochemistry.jl#L428-L435">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.auxiliary_vars" href="#ClimaLand.auxiliary_vars"><code>ClimaLand.auxiliary_vars</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">auxiliary_vars(soil::RichardsModel)</code></pre><p>A function which returns the names of the auxiliary variables of <code>RichardsModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/rre.jl#L286-L291">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_vars(soil::EnergyHydrology)</code></pre><p>A function which returns the names of the auxiliary variables of <code>EnergyHydrology</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/energy_hydrology.jl#L602-L607">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_vars(::SnowModel)</code></pre><p>Returns the auxiliary variable names for the snow model. These include</p><ul><li>the specific humidity at the surface of the snow (<code>q_sfc</code>, unitless),</li><li>the mass fraction in liquid water (<code>q_l</code>, unitless),</li><li>the thermal conductivity (<code>κ</code>, W/m/K),</li><li>the bulk temperature (<code>T</code>, K),</li><li>the surface temperature (<code>T_sfc</code>, K),</li><li>the snow depth (<code>z_snow</code>, m),</li><li>the bulk snow density (<code>ρ_snow</code>, kg/m^3)</li><li>the SHF, LHF, and vapor flux (<code>turbulent_fluxes.shf</code>, etc),</li><li>the net radiation (<code>R_n, J/m^2/s)</code>,</li><li>the energy flux in liquid water runoff (<code>energy_runoff</code>, J/m^2/s),</li><li>the water volume in runoff (<code>water_runoff</code>, m/s),</li></ul><p>and the total energy and water fluxes applied to the snowpack.</p><p>Since the snow can melt completely in one timestep, we clip the water and energy fluxes such that SWE cannot become negative and U cannot become unphysical. The clipped values are what are actually applied as boundary fluxes, and are stored in <code>applied_</code> fluxes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Snow/Snow.jl#L564-L586">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_vars(m::AbstractModel)</code></pre><p>Returns the auxiliary variable symbols for the model in the form of a tuple.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/models.jl#L110-L114">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.auxiliary_vars(::AbstractCanopyComponent)</code></pre><p>Returns the auxiliary types of the canopy component passed in as an argument.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/component_models.jl#L54-L59">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.auxiliary_vars(model::PModel)
ClimaLand.auxiliary_types(model::PModel)
ClimaLand.auxiliary_domain_names(model::PModel)</code></pre><p>Defines the auxiliary vars of the Pmode: canopy level net photosynthesis,  canopy-level gross photosynthesis (<code>GPP</code>), and dark respiration at the canopy level (<code>Rd</code>), and</p><ul><li><code>OptVars</code>: a NamedTuple with keys <code>:ξ_opt</code>, <code>:Vcmax25_opt</code>, and <code>:Jmax25_opt</code>   containing the acclimated optimal values of ξ, Vcmax25, and Jmax25, respectively. These are updated   using an exponential moving average (EMA) at local noon.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/pmodel.jl#L253-L265">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_vars(canopy::CanopyModel)</code></pre><p>Returns the auxiliary variables for the canopy model by looping over each sub-component name in <code>canopy_components</code>.</p><p>This relies on the propertynames of <code>CanopyModel</code> being the same as those returned by <code>canopy_components</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/Canopy.jl#L891-L899">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_vars(model::PlantHydraulicsModel)</code></pre><p>A function which returns the names of the auxiliary variables of the <code>PlantHydraulicsModel</code>, the water potential <code>ψ</code> (m), the volume flux*cross section <code>fa</code> (1/s), and the volume flux*root cross section in the roots <code>fa_roots</code> (1/s), where the cross section can be represented by an area index.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/PlantHydraulics.jl#L206-L214">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.auxiliary_types" href="#ClimaLand.auxiliary_types"><code>ClimaLand.auxiliary_types</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">auxiliary_types(soil::RichardsModel)</code></pre><p>A function which returns the names of the auxiliary types of <code>RichardsModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/rre.jl#L331-L336">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_types(soil::EnergyHydrology{FT}) where {FT}</code></pre><p>A function which returns the types of the auxiliary variables of <code>EnergyHydrology</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/energy_hydrology.jl#L625-L630">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_types(m::AbstractModel{FT}) where {FT}</code></pre><p>Returns the auxiliary variable types for the model in the form of a tuple.</p><p>Types provided must have <code>ClimaCore.RecursiveApply.rzero(T::DataType)</code> defined. Common examples include</p><ul><li><code>Float64</code>, <code>Float32</code> for scalar variables (a scalar value at each</li></ul><p>coordinate point)</p><ul><li><code>SVector{k,Float64}</code> for a mutable but statically sized array of</li></ul><p>length <code>k</code> at each coordinate point.</p><ul><li>Note that Arrays, MVectors are not isbits and cannot be used.</li></ul><p>Here, the coordinate points are those returned by coordinates(model).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/models.jl#L126-L140">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.auxiliary_types(::AbstractCanopyComponent)</code></pre><p>Returns the auxiliary types of the canopy component passed in as an argument.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/component_models.jl#L23-L28">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_types(canopy::CanopyModel)</code></pre><p>Returns the auxiliary types for the canopy model by looping over each sub-component name in <code>canopy_components</code>.</p><p>This relies on the propertynames of <code>CanopyModel</code> being the same as those returned by <code>canopy_components</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/Canopy.jl#L908-L916">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.auxiliary_types(model::PlantHydraulicsModel{FT}) where {FT}</code></pre><p>Defines the auxiliary types for the PlantHydraulicsModel.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/PlantHydraulics.jl#L226-L230">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.auxiliary_domain_names" href="#ClimaLand.auxiliary_domain_names"><code>ClimaLand.auxiliary_domain_names</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">auxiliary_domain_names(soil::RichardsModel)</code></pre><p>A function which returns the names of the auxiliary domain names of <code>RichardsModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/rre.jl#L307-L312">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_domain_names(m::AbstractModel)</code></pre><p>Returns the domain names for the auxiliary variables in the form of a tuple.</p><p>Examples: (:surface, :surface, :subsurface).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/models.jl#L117-L123">source</a></section><section><div><pre><code class="language-julia hljs">auxiliary_domain_names(m::AbstractCanopyComponent)</code></pre><p>Returns the domain names for the auxiliary variables in the form of a tuple.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Vegetation/component_models.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.make_update_cache" href="#ClimaLand.make_update_cache"><code>ClimaLand.make_update_cache</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> make_update_cache(model::AbstractModel)</code></pre><p>A helper function which updates all cache variables of a model; currently only used in <code>set_initial_cache</code> since not all cache variables are updated at the same time.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/models.jl#L165-L171">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.diffusive_flux" href="#ClimaLand.diffusive_flux"><code>ClimaLand.diffusive_flux</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">diffusive_flux(K, x_2, x_1, Δz)</code></pre><p>Calculates the diffusive flux of a quantity x (water content, temp, etc). Here, x<em>2 = x(z + Δz) and x</em>1 = x(z), so x_2 is at a larger z by convention.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/boundary_conditions.jl#L57-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.boundary_flux!" href="#ClimaLand.boundary_flux!"><code>ClimaLand.boundary_flux!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, bc::WaterFluxBC,  _...)</code></pre><p>A method of boundary fluxes which updates the desired flux.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L163-L167">source</a></section><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, bc::RichardsAtmosDrivenFluxBC,
                       boundary::ClimaLand.AbstractBoundary,
                       model::RichardsModel{FT},
                       Δz::ClimaCore.Fields.Field,
                       Y::ClimaCore.Fields.FieldVector,
                       p::NamedTuple,
                       t,
                       ) where {FT}</code></pre><p>A method of boundary fluxes which returns the desired water volume flux for the RichardsModel, at the top of the domain, in the case of a prescribed precipitation flux.</p><p>If <code>model.runoff</code> is not of type <code>NoRunoff</code>, surface runoff is accounted for when computing the infiltration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L183-L199">source</a></section><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, rre_bc::MoistureStateBC,
                       ::ClimaLand.TopBoundary,
                       model::AbstractSoilModel,
                       Δz::ClimaCore.Fields.Field,
                       Y::ClimaCore.Fields.FieldVector,
                       p::NamedTuple,
                       t,
                       )</code></pre><p>A method of boundary fluxes which converts a state boundary condition on θ_l at the top of the domain into a flux of liquid water.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L214-L226">source</a></section><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, rre_bc::MoistureStateBC,
                       ::ClimaLand.BottomBoundary,
                       model::AbstractSoilModel,
                       Δz::ClimaCore.Fields.Field,
                       Y::ClimaCore.Fields.FieldVector,
                       p::NamedTuple,
                       t,
                       )</code></pre><p>A method of boundary fluxes which converts a state boundary condition on θ_l at the bottom of the domain into a flux of liquid water.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L269-L281">source</a></section><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, bc::FreeDrainage,
                       boundary::ClimaLand.BottomBoundary,
                       model::AbstractSoilModel,
                       Δz::ClimaCore.Fields.Field,
                       Y::ClimaCore.Fields.FieldVector,
                       p::NamedTuple,
                       t,
                       )</code></pre><p>A method of boundary fluxes which enforces free drainage at the bottom of the domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L327-L339">source</a></section><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, bc::HeatFluxBC,  _...)</code></pre><p>A method of boundary fluxes which updates the desired flux.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L459-L464">source</a></section><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, heat_bc::TemperatureStateBC,
                       ::ClimaLand.TopBoundary,
                       model::EnergyHydrology,
                       Δz::ClimaCore.Fields.Field,
                       Y::ClimaCore.Fields.FieldVector,
                       p::NamedTuple,
                       t,
                       ):</code></pre><p>A method of boundary fluxes which converts a state boundary condition on temperature at the top of the domain into a flux of energy.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L481-L493">source</a></section><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, heat_bc::TemperatureStateBC,
                       ::ClimaLand.BottomBoundary,
                       model::EnergyHydrology,
                       Δz::ClimaCore.Fields.Field,
                       Y::ClimaCore.Fields.FieldVector,
                       p::NamedTuple,
                       t,
                       )</code></pre><p>A method of boundary fluxes which converts a state boundary condition on temperature at the bottom of the domain into a flux of energy.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L514-L526">source</a></section><section><div><pre><code class="language-julia hljs">boundary_flux!(bc_field, bc::AbstractBC, bound_type::AbstractBoundary, Δz, _...)</code></pre><p>A function which updates bc_field with the correct boundary flux  given any boundary condition (BC). </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/boundary_conditions.jl#L67-L71">source</a></section><section><div><pre><code class="language-julia hljs">function ClimaLand.boundary_flux!(bc_field,
    bc::RunoffBC,
    ::TopBoundary,
    model::Soil.RichardsModel,
    Δz::FT,
    Y::ClimaCore.Fields.FieldVector,
    p::NamedTuple,
    t,
    params,
)</code></pre><p>Extension of the <code>ClimaLand.boundary_flux</code> function, which returns the water volume boundary flux for the soil. At the top boundary, return the soil infiltration (computed each step and stored in <code>p.soil_infiltration</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/integrated/pond_soil_model.jl#L247-L263">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.boundary_flux!(bc_field,
    bc::SoilCO2FluxBC,
    boundary::ClimaLand.AbstractBoundary,
    Δz::ClimaCore.Fields.Field,
    Y::ClimaCore.Fields.FieldVector,
    p::NamedTuple,
    t,
)</code></pre><p>A method of ClimaLand.boundary_flux which updates the soilco2 flux (kg CO2 /m^2/s) in the case of a prescribed flux BC at either the top or bottom of the domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/Biogeochemistry/Biogeochemistry.jl#L468-L481">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.boundary_flux!(bc_field,
bc::SoilCO2StateBC,
boundary::ClimaLand.TopBoundary,
Δz::ClimaCore.Fields.Field,
Y::ClimaCore.Fields.FieldVector,
p::NamedTuple,
t,
)</code></pre><p>A method of ClimaLand.boundary_flux which returns the soilco2 flux in the case of a prescribed state BC at  top of the domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/Biogeochemistry/Biogeochemistry.jl#L506-L519">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.boundary_flux!(bc_field,
    bc::SoilCO2StateBC,
    boundary::ClimaLand.BottomBoundary,
    Δz::ClimaCore.Fields.Field,
    Y::ClimaCore.Fields.FieldVector,
    p::NamedTuple,
    t,
)</code></pre><p>A method of ClimaLand.boundary_flux which returns the soilco2 flux in the case of a prescribed state BC at bottom of the domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/Biogeochemistry/Biogeochemistry.jl#L538-L551">source</a></section><section><div><pre><code class="language-julia hljs">ClimaLand.boundary_flux!(bc_field,
bc::AtmosCO2StateBC,
boundary::ClimaLand.TopBoundary,
Δz::ClimaCore.Fields.Field,
Y::ClimaCore.Fields.FieldVector,
p::NamedTuple,
t,
)</code></pre><p>A method of ClimaLand.boundary_flux which returns the soilco2 flux in the case when the atmospheric CO2 is ued at top of the domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/Biogeochemistry/Biogeochemistry.jl#L575-L587">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.set_dfluxBCdY!" href="#ClimaLand.set_dfluxBCdY!"><code>ClimaLand.set_dfluxBCdY!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ClimaLand.set_dfluxBCdY!(
    model::RichardsModel,
    ::MoistureStateBC,
    boundary::ClimaLand.TopBoundary,
    Δz,
    Y,
    p,
    t,</code></pre><p>)</p><p>Computes the derivative of the flux in the top layer (due to the boundary condition), with respect to the state variable in the top layer. This value is then updated in-place in the cache.</p><p>For Richards equation (a diffusion equation with a single state variable), this is given by <code>∂F_bc/∂Y_N= -K_N (∂ψ_bc/∂ϑ_N) / Δz</code>, where <code>N</code> indicates the top layer cell index and <code>ψ_bc</code> is the pressure head at the boundary condition.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/standalone/Soil/boundary_conditions.jl#L355-L374">source</a></section><section><div><pre><code class="language-julia hljs">set_dfluxBCdY!(::AbstractModel,
              ::AbstractBC,
              ::AbstractBoundary,
              _...)::Union{ClimaCore.Fields.FieldVector, Nothing}</code></pre><p>A function stub which returns the derivative of the implicit tendency term of the <code>model</code> arising from the boundary condition, with respect to the state Y.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/implicit_timestepping.jl#L55-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaLand.make_update_boundary_fluxes" href="#ClimaLand.make_update_boundary_fluxes"><code>ClimaLand.make_update_boundary_fluxes</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">make_update_boundary_fluxes(model::AbstractModel)</code></pre><p>Return an <code>update_boundary_fluxes!</code> function that updates the auxiliary parameters in <code>p</code> corresponding to boundary fluxes or interactions between componets..</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/shared_utilities/models.jl#L153-L158">source</a></section><section><div><pre><code class="language-julia hljs">make_update_boundary_fluxes(
    land::LandHydrology{FT, SM, SW},
) where {FT, SM &lt;: Soil.RichardsModel{FT}, SW &lt;: Pond.PondModel{FT}}</code></pre><p>A method which makes a function; the returned function updates the auxiliary variable <code>p.soil_infiltration</code>, which is needed for both the boundary condition for the soil model and the source term (runoff) for the surface water model.</p><p>This function is called each ode function evaluation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/integrated/pond_soil_model.jl#L158-L169">source</a></section><section><div><pre><code class="language-julia hljs">make_update_boundary_fluxes(
    land::SoilCanopyModel{FT, MM, SM, RM},
) where {
    FT,
    MM &lt;: Soil.Biogeochemistry.SoilCO2Model{FT},
    SM &lt;: Soil.RichardsModel{FT},
    RM &lt;: Canopy.CanopyModel{FT}
    }</code></pre><p>A method which makes a function; the returned function updates the additional auxiliary variables for the integrated model, as well as updates the boundary auxiliary variables for all component models.</p><p>This function is called each ode function evaluation, prior to the tendency function evaluation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/integrated/soil_canopy_model.jl#L235-L252">source</a></section><section><div><pre><code class="language-julia hljs">make_update_boundary_fluxes(
    land::SoilSnowModel{FT, SnM, SoM},
) where {
    FT,
    SnM &lt;: Snow.SnowModel{FT},
    SoM &lt;: Soil.EnergyHydrology{FT},
    }</code></pre><p>A method which makes a function; the returned function updates the additional auxiliary variables for the integrated model, as well as updates the boundary auxiliary variables for all component models.</p><p>This function is called each ode function evaluation, prior to the tendency function evaluation.</p><p>In this method, we</p><ol><li>Compute the ground heat flux between soil and snow. This is required to update the snow and soil boundary fluxes</li><li>Update the snow boundary fluxes, which also computes any excess flux of energy or water which occurs when the snow</li></ol><p>completely melts in a step. In this case, that excess must go to the soil for conservation</p><ol><li>Update the soil boundary fluxes use precomputed ground heat flux and excess fluxes from snow.</li><li>Compute the net flux for the atmosphere, which is useful for assessing conservation.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/integrated/soil_snow_model.jl#L145-L167">source</a></section><section><div><pre><code class="language-julia hljs">make_update_boundary_fluxes(
    land::LandModel{FT, MM, SM, RM, SnM},
) where {
    FT,
    MM &lt;: Soil.Biogeochemistry.SoilCO2Model{FT},
    SM &lt;: Soil.RichardsModel{FT},
    RM &lt;: Canopy.CanopyModel{FT}
    SnM &lt;: Snow.SnowModel{FT}
    }</code></pre><p>A method which makes a function; the returned function updates the additional auxiliary variables for the integrated model, as well as updates the boundary auxiliary variables for all component models.</p><p>This function is called each ode function evaluation, prior to the tendency function evaluation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaLand.jl/blob/49bf4e9442cb7a36b7710545ce1013663f4d7cae/src/integrated/land.jl#L315-L333">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../AbstractModels/">« Abstract Models and Functions</a><a class="docs-footer-nextpage" href="../Callbacks/">Callbacks »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Friday 21 November 2025 03:00">Friday 21 November 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
